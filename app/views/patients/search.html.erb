<div class="d-grid gap-2 mt-2">
  <p class="m-auto ms-2">
    <%= link_to  "< Back", 'javascript:history.back()',  class: "black-back-link fw-bold text-decoration-none" %>
  </p>
  <h1 class="mx-auto text-white fw-bold">Patients</h1>
  <a class="center-a" href="<%= new_patient_registration_path %>"><%= image_tag("plus_button.svg", class: "add-manager-icon mx-auto")%></a>
  <%= form_with url: search_patients_path, method: :get, class: 'd-flex' do |form| %>
    <%= form.text_field :query_text, placeholder: 'write a surname or first name', onChange: 'this.form.requestSubmit()', value: params[:query_text], class: 'form-control mx-2 px-2' %>
  <% end %>
  <div class="row row-cols-3 row-cols-md-3 g-1 m-2 mb-0 bg-container-cards rounded">
    <% @patients.each do |patient|%>
      <div class="col">
        <div class="card h-100 shadow">
          <% if patient.photo.attached? %>
            <%= image_tag(patient.photo, class:"card-img-top pt-2 mx-auto h-100 w-100") %>
          <% else %>
            <%= image_tag('coming_soon_2.png', class:"card-img-top pt-2 mx-auto h-100 w-100") %>
          <% end %>
          <div class="card-body mx-auto">
            <p class="card-title"><%= patient.name %> <%= patient.last_name %></p>
          </div>
          <%= button_to "Check", patient_path(patient), method: :get, form_class: "d-grid mx-auto", class: "btn btn-sm color-btn-2 rounded-pill shadow text-white fw-bold mb-1" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
<div class="d-flex justify-content-center gap-1 mt-0 pt-0 bg-container-cards mx-2 mb-2">
  <% if @pagy.prev.present? && @pagy.next.present? %>
    <%= button_to "Prev", pagy_url_for(@pagy, @pagy.prev), class: "btn btn-sm color-btn fw-bold text-white" %>
    <%= button_to "Next", pagy_url_for(@pagy, @pagy.next), class: "btn btn-sm color-btn fw-bold text-white" %>
  <% elsif @pagy.prev.present? %>
    <%= button_to "Prev", pagy_url_for(@pagy, @pagy.prev), class: "btn btn-sm color-btn fw-bold text-white" %>
  <% elsif @pagy.next.present? %>
    <%= button_to "Next", pagy_url_for(@pagy, @pagy.next), class: "btn btn-sm color-btn fw-bold text-white" %>
  <% end %>
</div>
